# ¬©Ô∏è Hikka by Dan Gazizullin, 2021-2023
# ¬©Ô∏è Adaptator by Dima Admiralov, 2022-20?? 
# This file is a part of Adaptator Userbot
# üåê https://github.com/s1zexxx/Adaptator
# You can redistribute it and/or modify it under the terms of the GNU AGPLv3
# üåê https://www.gnu.org/licenses/agpl-3.0.html
# ---------------------------------------------------------------------------------
# ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚°†‚£ø‚¢∑‚£ª‚£ø‚£æ‚£≥‚°á‚¢∫‚†ü‚†í‚†í‚†∂‚¢§‚£à‚†É‚¢†‚°Ä
# ‚†Ñ‚†Ñ‚†Ñ‚¢Ä‚£º‚°ø‚†ã‚¢â‚£â‚£ô‚†ø‚†Å‚¢Å‚£§‚£§‚£Ñ‚°Ä‚†Ñ‚†à‚†≥‚¢æ‚£ø‚£Ñ
# ‚†Ñ‚†Ñ‚†Ñ‚¢û‚°û‚†Ñ‚£¥‚£ø‚°ø‚†õ‚†ì‚†Ñ‚†â‚†â‚†â‚†â‚†π‚£∑‚£Ñ‚†Ñ‚†Ñ‚†ô‚¢ø‚£¶
# ‚†Ñ‚¢Ä‚£æ‚°ü‚†Ñ‚£∏‚†ü‚†Å‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†ô‚¢ø‚°Ä‚†Ñ‚†∞‚£ø‚£Ü
# ‚†Ñ‚¢∏‚£ø‚†Å‚¢∏‚£ø‚†Ñ‚†Ñ‚¢∏‚¢∏‚†Ñ‚†Ñ‚†Ñ‚¢∏‚£Ü‚¢†‚£Ä‚°Ä‚£ß‚£®‚£ª‚°Ä‚†Ñ‚¢ª‚£ø‚£¶‚£Ä
# ‚†Ñ‚¢∏‚°á‚°Ä‚†ò‚£ø‚¢∞‚£ê‚¢æ‚¢ø‚°Ä‚†Ñ‚°Ä‚¢®‚£é‚£ª‚£∑‚£∂‚£ø‚£ø‚£ø‚£á‚¢Ä‚¢∏‚£ø‚£ø‚£ø‚£∑
# ‚†Ñ‚¢∏‚££‚°á‚£ß‚£ø‚£ø‚£ø‚£ø‚°é‚¢≥‚£ü‚†ø‚£ø‚£ø‚£è‚£â‚£ø‚£ø‚£ø‚¢ª‚£ø‚£ø‚£æ‚£ø‚£ø‚£ø‚£ø‚£¶
# ‚†Ñ‚†Ñ‚¢º‚°á‚¢π‚£ø‚°è‚¢†‚£ø‚£ø‚†Ñ‚†â‚†Ñ‚†Ñ‚†à‚†Ñ‚¢π‚£ø‚†ü‚†º‚¢ª‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø
# ‚†Ñ‚†Ñ‚†à‚¢ø‚¢à‚£ø‚°õ‚†ò‚£ø‚°á‚†Ñ‚†Ñ‚°Ä‚†Ñ‚†Ñ‚†Ñ‚†à‚†â‚†Å‚†Ñ‚£∏‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø‚£ø
# ‚†Ñ‚†Ñ‚¢Ä‚£ø‚£º‚°ø‚£ø‚£Ä‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†É‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†ò‚£ª‚°è‚£ø‚£ø‚¢ª‚£ø‚£ø‚£ø‚£ø
# ‚†Ñ‚†Ñ‚†æ‚¢ª‚°á‚£ø‚£∏‚£¶‚£Ä‚†Ñ‚†Ñ‚†ê‚¢ü‚†ô‚¢ª‚†É‚†Ñ‚†Ñ‚†Ñ‚£æ‚°è‚£∑‚¢ª‚°π‚°ü‚£ø‚£ø‚°ü‚¢ø
# ‚†Ñ‚¢Ä‚°¥‚¢ª‚£á‚¢ø‚£∑‚¢ª‚°ü‚†ª‚£∂‚£§‚£Ä‚†â‚†Ñ‚£Ä‚£¥‚°ø‚¢£‚°ü‚†Ñ‚£ø‚¢∏‚°á‚£∞‚°ü‚†ª‚†É‚¢∏
# ‚¢†‚°è‚†Ñ‚†Ñ‚†à‚†ª‚£ø‚£è‚£∑‚†Ñ‚†à‚†ª‚†â‚†õ‚†õ‚†â‚†Ñ‚†Ñ‚¢õ‚†Ñ‚†Ñ‚†ª‚¢†‚†Å‚¢õ‚†Å‚†Ñ‚†Ñ‚¢∏
# ‚£º‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†à‚¢ø‚°ò‚†É‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚††‚†à‚†Ñ‚†Ñ‚†Ñ‚¢†‚£∏‚£†‚°û‚†Ñ‚†Ñ‚†Ñ‚£ø
# ‚£§‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚¢∏‚£á‚°á‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†Ñ‚†à‚£ø‚†ü‚†Ñ‚†Ñ‚†Ñ‚£∏‚£ø
#
# ü•Ä Module for Telethon User Bot (Adaptator, Hikka, FTG)
# ---------------------------------------------------------------------------------
# meta developer: @doxny
# meta description: Configurable ping

import datetime
import logging
import time
from telethon.tl.functions.messages import SendMediaRequest
import random
from asyncio import sleep
import os
from .. import loader, utils, version
from telethon.tl.functions.users import GetFullUserRequest
import time
import logging
import re
from ..inline.types import InlineCall
from telethon.tl.functions.account import UpdateProfileRequest
from telethon.tl.types import Message
from telethon.tl.functions.channels import GetFullChannelRequest, GetParticipantsRequest
from telethon.tl.functions.messages import GetHistoryRequest, GetFullChatRequest
from telethon.tl.types import MessageActionChannelMigrateFrom, ChannelParticipantsAdmins, UserStatusOnline
from telethon.errors import (ChannelInvalidError, ChannelPrivateError, ChannelPublicGroupNaError)
from telethon.errors.rpcerrorlist import UsernameOccupiedError
from telethon.tl.functions.account import UpdateProfileRequest, UpdateUsernameRequest
from telethon.tl.functions.users import GetFullUserRequest
from datetime import datetime
from math import sqrt
import requests
import git
import datetime
import asyncio
from telethon import types
from telethon.tl.functions.channels import GetFullChannelRequest
from .. import loader, utils
from asyncio import sleep
from datetime import timedelta
from telethon import types
import datetime
import logging
import time
import random
from telethon.tl.functions.users import GetFullUserRequest
from telethon.tl.types import Message
from datetime import datetime
from datetime import timedelta
from telethon import functions
from os import remove
from telethon.tl.functions.channels import LeaveChannelRequest, InviteToChannelRequest 
from telethon.errors import UserIdInvalidError, UserNotMutualContactError, UserPrivacyRestrictedError, BotGroupsBlockedError, ChannelPrivateError, YouBlockedUserError,  MessageTooLongError, \
                            UserBlockedError, ChatAdminRequiredError, UserKickedError, InputUserDeactivatedError, ChatWriteForbiddenError, UserAlreadyParticipantError
from telethon.tl.types import ChannelParticipantCreator, ChannelParticipantsAdmins, PeerChat, ChannelParticipantsBots
from telethon.tl.functions.messages import AddChatUserRequest
import io
import io
import logging
from io import BytesIO

import requests
from requests import post
from telethon import events
from telethon.errors.rpcerrorlist import YouBlockedUserError
from telethon.tl.types import DocumentAttributeFilename

from .. import loader, utils
import string
from typing import List
from urllib.parse import quote
import requests
from telethon.tl.types import Message
from ..inline.types import InlineCall
from .. import loader, utils
from telethon import events
from telethon.errors.rpcerrorlist import YouBlockedUserError
from .. import loader, utils
from telethon.tl.functions.channels import GetFullChannelRequest, GetParticipantsRequest
from telethon.tl.functions.messages import GetHistoryRequest
from telethon.tl.types import MessageActionChannelMigrateFrom, ChannelParticipantsAdmins, UserStatusOnline
from telethon.errors import (ChannelInvalidError, ChannelPrivateError, ChannelPublicGroupNaError)
from datetime import datetime
import random
from asyncio import sleep
import os
from .. import loader, utils
from telethon.tl.functions.users import GetFullUserRequest
import time 
from telethon.tl.types import Message
from telethon import types
from random import randint
from contextlib import suppress
from telethon.tl.types import Message, MessageMediaPhoto
from telethon import errors, functions
from telethon.errors import (
    BotGroupsBlockedError,
    ChannelPrivateError,
    ChatAdminRequiredError,
    ChatWriteForbiddenError,
    InputUserDeactivatedError,
    MessageTooLongError,
    UserAlreadyParticipantError,
    UserBlockedError,
    UserIdInvalidError,
    UserKickedError,
    UserNotMutualContactError,
    UserPrivacyRestrictedError,
    YouBlockedUserError,
)
from telethon.tl.functions.channels import InviteToChannelRequest, LeaveChannelRequest
from telethon.tl.functions.messages import AddChatUserRequest, GetCommonChatsRequest
from telethon.tl.functions.users import GetFullUserRequest
from telethon.tl.types import (
    ChannelParticipantCreator,
    ChannelParticipantsAdmins,
    ChannelParticipantsBots,
)
from .. import loader, utils

from asyncio import sleep

from datetime import timedelta

from telethon import types

import datetime

import logging

import time

import random

import io

from asyncio import sleep

from os import remove



from telethon import errors, functions

from telethon.errors import (

    BotGroupsBlockedError,

    ChannelPrivateError,

    ChatAdminRequiredError,

    ChatWriteForbiddenError,

    InputUserDeactivatedError,

    MessageTooLongError,

    UserAlreadyParticipantError,

    UserBlockedError,

    UserIdInvalidError,

    UserKickedError,

    UserNotMutualContactError,

    UserPrivacyRestrictedError,

    YouBlockedUserError,

)

from telethon.tl.functions.channels import InviteToChannelRequest, LeaveChannelRequest

from telethon.tl.functions.messages import AddChatUserRequest, GetCommonChatsRequest

from telethon.tl.functions.users import GetFullUserRequest

from telethon.tl.types import (

    ChannelParticipantCreator,

    ChannelParticipantsAdmins,

    ChannelParticipantsBots,

)

from telethon import types



from telethon.tl.types import Message

from datetime import datetime

from datetime import timedelta

from telethon import functions

from telethon.tl.functions.users import GetFullUserRequest

import datetime

from datetime import datetime

from datetime import timedelta



from telethon import functions

from telethon.tl.types import Message

import time

from random import randint

from contextlib import suppress

from telethon.tl.functions.users import GetFullUserRequest
import time 
from telethon.tl.types import Message
from telethon import types
from random import randint
from contextlib import suppress
from telethon.tl.types import Message, MessageMediaPhoto
from telethon import errors, functions
from telethon.errors import (
    BotGroupsBlockedError,
    ChannelPrivateError,
    ChatAdminRequiredError,
    ChatWriteForbiddenError,
    InputUserDeactivatedError,
    MessageTooLongError,
    UserAlreadyParticipantError,
    UserBlockedError,
    UserIdInvalidError,
    UserKickedError,
    UserNotMutualContactError,
    UserPrivacyRestrictedError,
    YouBlockedUserError,
)
from telethon.tl.functions.channels import InviteToChannelRequest, LeaveChannelRequest
from telethon.tl.functions.messages import AddChatUserRequest, GetCommonChatsRequest
from telethon.tl.functions.users import GetFullUserRequest
from telethon.tl.types import (
    ChannelParticipantCreator,
    ChannelParticipantsAdmins,
    ChannelParticipantsBots,
)
from telethon.tl.functions.channels import GetFullChannelRequest, GetParticipantsRequest
from telethon.tl.functions.messages import GetHistoryRequest
from telethon.tl.types import MessageActionChannelMigrateFrom, ChannelParticipantsAdmins, UserStatusOnline
from telethon.errors import (ChannelInvalidError, ChannelPrivateError, ChannelPublicGroupNaError)
from datetime import datetime
from .. import loader, utils
from asyncio import sleep
from datetime import timedelta
from telethon import types
import datetime
import logging
import time
import random
from telethon.tl.functions.users import GetFullUserRequest
from telethon.tl.types import Message
from datetime import datetime
from datetime import timedelta
from telethon import functions
from os import remove
from telethon.tl.functions.channels import LeaveChannelRequest, InviteToChannelRequest 
from telethon.errors import UserIdInvalidError, UserNotMutualContactError, UserPrivacyRestrictedError, BotGroupsBlockedError, ChannelPrivateError, YouBlockedUserError,  MessageTooLongError, \
                            UserBlockedError, ChatAdminRequiredError, UserKickedError, InputUserDeactivatedError, ChatWriteForbiddenError, UserAlreadyParticipantError
from telethon.tl.types import ChannelParticipantCreator, ChannelParticipantsAdmins, PeerChat, ChannelParticipantsBots
from telethon.tl.functions.messages import AddChatUserRequest
import io
import string
from typing import List
from urllib.parse import quote
import requests
from telethon.tl.types import Message
from ..inline.types import InlineCall
from .. import loader, utils
from telethon import events
from telethon.errors.rpcerrorlist import YouBlockedUserError

from telethon.tl.types import Message

from .. import loader, main, utils

logger = logging.getLogger(__name__)

start = datetime.now()

class PingMod(loader.Module):

    strings = {
        "name": "Ping",
        "loading": "<b><emoji document_id=5460898999575785614>‚ù§Ô∏è</emoji>ùôøùô∏ùôΩùô∂ ùô∞ùôΩùôæùôΩùô∏ùöâùô∞ùöÉùôæùöÅ<emoji document_id=5458654823329050591>‚ù§Ô∏è</emoji></b>"}

    @loader.command()
    async def ping(self, message: Message):
        """- Get your ping"""
        args = utils.get_args_raw(message)

        starter = datetime.now()

        end = datetime.now()

        pins = (end-start).microseconds / 100

        timing = starter - start

        ping_string = str(pins)

        pingg = ping_string.split(".")

        ping = float(pingg[1])

        time_string = str(timing)

        time_result = time_string.split(".")[0]

        reply = await message.get_reply_message()


        message = await utils.answer(message, self.strings("loading"))
        await message.delete()
        media_files = ("https://x0.at/B9Q-.mp4", "https://x0.at/B9Q-.mp4")
        try:
            user_id = (
                (
                    (
                        await self.client.het_entity(
                            args if not args.isdigit() else int(args)
                        )
                    ).id
                )
                if args
                else reply.sender_id
            )
        except Exception:
            user_id = self._tg_id
            user = await self._client(GetFullUserRequest(user_id))
            user_ent = user.users[0]

            ping_info = (
                f"<b>‚ù≤<emoji document_id=5294365752957084882>üëÄ</emoji>‚ù≥‚Äî<emoji document_id=5409244012022343132>üî†</emoji><emoji document_id=5408856361159108709>üî†</emoji><emoji document_id=5406963122395164298>üî†</emoji>¬† <emoji document_id=5408836213467523977>üî†</emoji><emoji document_id=5406739161325514393>üî†</emoji><emoji document_id=5407119575168856972>üî†</emoji><emoji document_id=5406668521998397316>üî†</emoji>‚Äî‚ù≤<emoji document_id=5294365752957084882>üëÄ</emoji>‚ù≥</b> <code>{ping}</code>\n\n"
                f"<b>‚ù≤<emoji document_id=5954135174152194696>‚úÖ</emoji>‚ù≥‚Äî<emoji document_id=5409212323753634759>üî†</emoji><emoji document_id=5408836213467523977>üî†</emoji> <emoji document_id=5408936990580155991>üî†</emoji><emoji document_id=5408856361159108709>üî†</emoji><emoji document_id=5406584014221882146>üî†</emoji><emoji document_id=5408836213467523977>üî†</emoji>‚Äî‚ù≤<emoji document_id=5954135174152194696>‚úÖ</emoji>‚ù≥</b> <code>{time_result}</code>\n"
                f"<b>‚ù≤<emoji document_id=5954135174152194696>‚úÖ</emoji>‚ù≥‚Äî<emoji document_id=5406739161325514393>üî†</emoji><emoji document_id=5407119575168856972>üî†</emoji><emoji document_id=5406583266897571899>üî†</emoji><emoji document_id=5409212323753634759>üî†</emoji>‚Äî‚ù≤<emoji document_id=5954135174152194696>‚úÖ</emoji>‚ù≥<i>–°–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–∫–ª–∏–∫–∞ Telegram –≤ –±–æ–ª—å—à–µ–π —Å—Ç–µ–ø–µ–Ω–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ Telegram –∏ –¥—Ä—É–≥–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –∏ –Ω–∏–∫–∞–∫ –Ω–µ —Å–≤—è–∑–∞–Ω–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —é–∑–µ—Ä–±–æ—Ç.</i></b>\n"
                f"<b>‚ù≤<emoji document_id=5954135174152194696>‚úÖ</emoji>‚ù≥‚Äî<emoji document_id=5409244012022343132>üî†</emoji><emoji document_id=5406636700585701784>üî†</emoji><emoji document_id=5406998242342745532>üî†</emoji><emoji document_id=5406795549951144671>üî†</emoji><emoji document_id=5406739161325514393>üî†</emoji><emoji document_id=5406864063269451080>üî†</emoji>‚Äî‚ù≤<emoji document_id=5954135174152194696>‚úÖ</emoji>‚ù≥ <code>9.9.9</code></b>\n"
                f"<b>‚ù≤<emoji document_id=5954135174152194696>‚úÖ</emoji>‚ù≥‚Äî<emoji document_id=5408836213467523977>üî†</emoji><emoji document_id=5409212323753634759>üî†</emoji><emoji document_id=5406724159004749316>üî†</emoji><emoji document_id=5409303299750897339>üî†</emoji><emoji document_id=5409324980745806772>üî†</emoji><emoji document_id=5409212323753634759>üî†</emoji><emoji document_id=5409244012022343132>üî†</emoji><emoji document_id=5408856361159108709>üî†</emoji><emoji document_id=5408936990580155991>üî†</emoji><emoji document_id=5406636700585701784>üî†</emoji><emoji document_id=5406724159004749316>üî†</emoji><emoji document_id=5409303299750897339>üî†</emoji>‚Äî‚ù≤<emoji document_id=5954135174152194696>‚úÖ</emoji>‚ù≥</b>\n\n"
                f"<b><emoji document_id=5413689157144816057>üî¢</emoji><emoji document_id=5294365752957084882>üëÄ</emoji><emoji document_id=5413501368289734875>üî¢</emoji>–ö·¥©·¥Ä·¥õ·¥ã·¥è·¥á –∏ ç—è<b/> <emoji document_id=5413557786980134319>‚ñ∂Ô∏è</emoji> {user_ent.first_name}\n"
                f"<b><emoji document_id=5413689157144816057>üî¢</emoji><emoji document_id=5294365752957084882>üëÄ</emoji><emoji document_id=5413501368289734875>üî¢</emoji>–ò ç—è ·¥®·¥è·¥ß—å…ú·¥è ô·¥Ä·¥õ·¥á·¥ß—è</b> <emoji document_id=5413557786980134319>‚ñ∂Ô∏è</emoji> {user_ent.username}\n"
                f"<b><emoji document_id=5413689157144816057>üî¢</emoji><emoji document_id=5294365752957084882>üëÄ</emoji><emoji document_id=5413501368289734875>üî¢</emoji>–ê–π–¥–∏</b> <emoji document_id=5413557786980134319>‚ñ∂Ô∏è</emoji> <code>{user_ent.id}</code>\n"
                f"<b><emoji document_id=5413689157144816057>üî¢</emoji><emoji document_id=5294365752957084882>üëÄ</emoji><emoji document_id=5413501368289734875>üî¢</emoji>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</b> <emoji document_id=5413557786980134319>‚ñ∂Ô∏è</emoji> <b>16.10.2023</b>\n"
            )
            chat_id = message.chat.id
            if chat_id:
                await self.client.send_file(message.peer_id, random.choice(media_files), caption=ping_info)